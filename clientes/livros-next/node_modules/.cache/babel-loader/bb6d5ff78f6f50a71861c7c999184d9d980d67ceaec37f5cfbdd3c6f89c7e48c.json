{"ast":null,"code":"const baseURL = \"http://localhost:3030/livros\";\nclass ControleLivros {\n  async obterLivros() {\n    let lista = [];\n    const response = await fetch(baseURL);\n    const data = await response.json().then(res => res.json()).then(livros => {\n      livros.map(livro_ => {\n        let livro = {\n          codigo: livro_._id,\n          codEditora: livro_.codEditora,\n          titulo: livro_.titulo,\n          resumo: livro_.resumo,\n          autores: livro_.autores\n        };\n        lista.push(livro);\n      });\n    });\n    return lista;\n  }\n  async incluir(livro) {\n    let livro_m = {\n      _id: null,\n      codEditora: livro.codEditora,\n      titulo: livro.titulo,\n      resumo: livro.resumo,\n      autores: livro.autores\n    };\n    fetch(baseURL, {\n      method: \"POST\",\n      body: JSON.stringify(livro_m),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.ok);\n    console.log(JSON.stringify(livro_m));\n  }\n  async excluir(codigo) {\n    fetch(baseURL + codigo, {\n      method: 'DELETE'\n    }).then(res => res.ok);\n  }\n}\nexport default ControleLivros;","map":{"version":3,"names":["baseURL","ControleLivros","obterLivros","lista","response","fetch","data","json","then","res","livros","map","livro_","livro","codigo","_id","codEditora","titulo","resumo","autores","push","incluir","livro_m","method","body","JSON","stringify","headers","ok","console","log","excluir"],"sources":["C:/Users/Pc/Projetos/Miss√£o Pratica Nivel 5/clientes/Missao-N3-M2-React/src/controle/ControleLivros.ts"],"sourcesContent":["import { Livro } from '../modelo/Livro';\r\n\r\nconst baseURL = \"http://localhost:3030/livros\";\r\n\r\ninterface LivroMongo {\r\n    _id: string | null;\r\n    codEditora: number;\r\n    titulo: string;\r\n    resumo: string;\r\n    autores: string[];\r\n}\r\n\r\nclass ControleLivros {\r\n    async obterLivros(){\r\n        let lista: Array<Livro> = [];\r\n        const response = await fetch(baseURL)\r\n        const data = await response.json()\r\n\r\n        .then((res) => res.json())\r\n        .then((livros) => {\r\n            livros.map((livro_:any) => {\r\n                let livro: Livro = {\r\n                    codigo: livro_._id,\r\n                    codEditora: livro_.codEditora,\r\n                    titulo: livro_.titulo,\r\n                    resumo: livro_.resumo,\r\n                    autores: livro_.autores,\r\n                };\r\n                lista.push(livro)\r\n            });\r\n        });\r\n        return lista;\r\n    }\r\n\r\n    async incluir(livro: Livro){\r\n        let livro_m: LivroMongo = {\r\n            _id: null,\r\n            codEditora: livro.codEditora,\r\n            titulo: livro.titulo,\r\n            resumo: livro.resumo,\r\n            autores: livro.autores,\r\n        };\r\n        fetch(baseURL, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(livro_m),\r\n            headers: { \r\n                \"Content-Type\": \"application/json\"\r\n             }\r\n        })\r\n        .then( res => res.ok );\r\n        console.log(JSON.stringify(livro_m))\r\n    }\r\n\r\n    async excluir(codigo:string){\r\n        fetch(baseURL+codigo,{method:'DELETE'})\r\n            .then( res => res.ok );\r\n    }\r\n}\r\n\r\nexport default ControleLivros"],"mappings":"AAEA,MAAMA,OAAO,GAAG,8BAA8B;AAU9C,MAAMC,cAAc,CAAC;EACjB,MAAMC,WAAW,GAAE;IACf,IAAIC,KAAmB,GAAG,EAAE;IAC5B,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACL,OAAO,CAAC;IACrC,MAAMM,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,EAAE,CAEjCC,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACF,IAAI,EAAE,CAAC,CACzBC,IAAI,CAAEE,MAAM,IAAK;MACdA,MAAM,CAACC,GAAG,CAAEC,MAAU,IAAK;QACvB,IAAIC,KAAY,GAAG;UACfC,MAAM,EAAEF,MAAM,CAACG,GAAG;UAClBC,UAAU,EAAEJ,MAAM,CAACI,UAAU;UAC7BC,MAAM,EAAEL,MAAM,CAACK,MAAM;UACrBC,MAAM,EAAEN,MAAM,CAACM,MAAM;UACrBC,OAAO,EAAEP,MAAM,CAACO;QACpB,CAAC;QACDhB,KAAK,CAACiB,IAAI,CAACP,KAAK,CAAC;MACrB,CAAC,CAAC;IACN,CAAC,CAAC;IACF,OAAOV,KAAK;EAChB;EAEA,MAAMkB,OAAO,CAACR,KAAY,EAAC;IACvB,IAAIS,OAAmB,GAAG;MACtBP,GAAG,EAAE,IAAI;MACTC,UAAU,EAAEH,KAAK,CAACG,UAAU;MAC5BC,MAAM,EAAEJ,KAAK,CAACI,MAAM;MACpBC,MAAM,EAAEL,KAAK,CAACK,MAAM;MACpBC,OAAO,EAAEN,KAAK,CAACM;IACnB,CAAC;IACDd,KAAK,CAACL,OAAO,EAAE;MACXuB,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACJ,OAAO,CAAC;MAC7BK,OAAO,EAAE;QACL,cAAc,EAAE;MACnB;IACL,CAAC,CAAC,CACDnB,IAAI,CAAEC,GAAG,IAAIA,GAAG,CAACmB,EAAE,CAAE;IACtBC,OAAO,CAACC,GAAG,CAACL,IAAI,CAACC,SAAS,CAACJ,OAAO,CAAC,CAAC;EACxC;EAEA,MAAMS,OAAO,CAACjB,MAAa,EAAC;IACxBT,KAAK,CAACL,OAAO,GAACc,MAAM,EAAC;MAACS,MAAM,EAAC;IAAQ,CAAC,CAAC,CAClCf,IAAI,CAAEC,GAAG,IAAIA,GAAG,CAACmB,EAAE,CAAE;EAC9B;AACJ;AAEA,eAAe3B,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}